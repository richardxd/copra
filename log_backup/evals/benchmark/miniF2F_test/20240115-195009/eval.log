2024-01-15 19:50:09,018 - __main__ - INFO - Pid: 21781
2024-01-15 19:50:09,019 - __main__ - INFO - Running Experiment: {
    "env_settings": {
        "name": "bm25_retrieval",
        "retrieval_strategy": "BM25"
    },
    "prompt_settings": {
        "name": "lean_few_shot_informal_to_formal_dfs_gpt4_turbo",
        "main_prompt": "data/prompts/system/lean-proof-agent-with-dfs-and-informal.md",
        "conv_prompt": "data/prompts/conversation/lean-proof-agent-example-long-conv-dfs-and-informal.md",
        "informal_proof_repo": ".log/proofs/eval_driver/informal_few_shot/gpt4/miniF2F_test/20231204-234547/informal_proofs"
    },
    "eval_settings": {
        "name": "n_60_dfs_gpt4_128k_no_retrieve_no_ex",
        "use_hammer": false,
        "setting_type": "Agent",
        "max_proof_depth": 100,
        "timeout_in_secs": 60,
        "proof_retries": 1,
        "max_tokens_per_action": 100,
        "max_theorems_in_prompt": 7,
        "gpt_model_name": "gpt-4-1106-preview",
        "max_number_of_episodes": 1,
        "max_steps_per_episode": 60,
        "render": false,
        "checkpoint_dir": ".log/checkpoints",
        "should_checkpoint": false,
        "temperature": 0.0,
        "max_history_messages": 0,
        "policy_name": "Dfs",
        "proof_dump_dir": ".log/proofs/eval_driver/dfs",
        "use_human_readable_proof_context": true,
        "sample": 1.0,
        "sample_seed": 3840,
        "use_example_retrieval": false,
        "always_use_useful_theorem_retrieval": false,
        "num_goal_per_prompt": null
    },
    "benchmark": {
        "name": "miniF2F_test",
        "num_files": 1,
        "language": "LEAN",
        "datasets": [
            {
                "project": "data/benchmarks/miniF2F",
                "files": [
                    {
                        "path": "lean/src/test.lean",
                        "theorems": "*"
                    }
                ]
            }
        ],
        "few_shot_data_path_for_retrieval": null,
        "few_shot_metadata_filename_for_retrieval": null,
        "dfs_data_path_for_retrieval": null,
        "dfs_metadata_filename_for_retrieval": null
    }
}
2024-01-15 19:50:09,031 - __main__ - INFO - Getting all lemmas in file: data/benchmarks/miniF2F/lean/src/test.lean with timeout: 300000 seconds
2024-01-15 19:50:22,049 - __main__ - INFO - Discovered 244 lemmas
2024-01-15 19:50:22,058 - __main__ - INFO - Discovered 244 lemmas to prove in data/benchmarks/miniF2F/lean/src/test.lean
2024-01-15 19:50:22,059 - __main__ - INFO - Lemmas to prove in file data/benchmarks/miniF2F/lean/src/test.lean: 
['mathd_algebra_478', 'numbertheory_4x3m7y3neq2003', 'aime_1983_p1', 'amc12_2001_p5', 'mathd_algebra_141', 'mathd_numbertheory_3', 'imo_1969_p2', 'mathd_algebra_209', 'mathd_numbertheory_1124', 'imo_1983_p6', 'mathd_numbertheory_237', 'mathd_algebra_33', 'amc12b_2021_p3', 'mathd_numbertheory_299', 'amc12b_2020_p2', 'algebra_sqineq_unitcircatbpabsamblt1', 'imo_1977_p6', 'mathd_algebra_419', 'amc12a_2020_p10', 'imo_1960_p2', 'mathd_numbertheory_427', 'numbertheory_x5neqy2p4', 'imosl_2007_algebra_p6', 'mathd_algebra_398', 'imo_1963_p5', 'mathd_numbertheory_430', 'mathd_algebra_459', 'induction_12dvd4expnp1p20', 'mathd_algebra_320', 'mathd_algebra_137', 'imo_1997_p5', 'mathd_numbertheory_277', 'mathd_numbertheory_559', 'mathd_algebra_160', 'mathd_algebra_24', 'mathd_algebra_176', 'induction_nfactltnexpnm1ngt3', 'mathd_algebra_208', 'mathd_numbertheory_353', 'numbertheory_notequiv2i2jasqbsqdiv8', 'mathd_algebra_156', 'mathd_numbertheory_12', 'mathd_numbertheory_345', 'mathd_numbertheory_447', 'mathd_numbertheory_328', 'mathd_numbertheory_451', 'aime_1997_p9', 'algebra_sqineq_at2malt1', 'algebra_apbmpcneq0_aeq0anbeq0anceq0', 'mathd_algebra_171', 'mathd_numbertheory_227', 'mathd_algebra_188', 'mathd_numbertheory_765', 'imo_1959_p1', 'mathd_numbertheory_175', 'induction_sumkexp3eqsumksq', 'numbertheory_fxeq4powxp6powxp9powx_f2powmdvdf2pown', 'imo_1992_p1', 'imo_1982_p1', 'aime_1987_p5', 'mathd_algebra_346', 'mathd_algebra_487', 'mathd_numbertheory_728', 'mathd_algebra_184', 'mathd_numbertheory_552', 'amc12b_2021_p9', 'aime_1994_p3', 'mathd_algebra_44', 'mathd_algebra_215', 'mathd_numbertheory_293', 'mathd_numbertheory_769', 'mathd_algebra_452', 'mathd_numbertheory_5', 'mathd_numbertheory_207', 'mathd_numbertheory_342', 'mathd_numbertheory_483', 'amc12b_2020_p21', 'amc12a_2003_p5', 'mathd_numbertheory_495', 'mathd_algebra_296', 'algebra_abpbcpcageq3_sumaonsqrtapbgeq3onsqrt2', 'algebra_2varlineareq_fp3zeq11_3tfm1m5zeqn68_feqn10_zeq7', 'mathd_numbertheory_247', 'induction_pord1p1on2powklt5on2', 'mathd_algebra_107', 'numbertheory_2pownm1prime_nprime', 'mathd_algebra_412', 'amc12a_2013_p4', 'mathd_algebra_392', 'mathd_numbertheory_314', 'induction_prod1p1onk3le3m1onn', 'mathd_numbertheory_343', 'mathd_algebra_756', 'amc12b_2002_p7', 'mathd_algebra_80', 'mathd_numbertheory_457', 'amc12_2000_p12', 'mathd_numbertheory_135', 'mathd_algebra_275', 'mathd_algebra_388', 'amc12a_2020_p7', 'imo_1981_p6', 'mathd_algebra_263', 'mathd_numbertheory_34', 'mathd_numbertheory_764', 'amc12b_2021_p4', 'imo_1962_p2', 'mathd_algebra_170', 'mathd_algebra_432', 'mathd_algebra_598', 'algebra_bleqa_apbon2msqrtableqambsqon8b', 'mathd_algebra_276', 'amc12a_2021_p14', 'algebra_sum1onsqrt2to1onsqrt10000lt198', 'mathd_numbertheory_618', 'amc12a_2020_p4', 'amc12b_2020_p6', 'mathd_numbertheory_435', 'algebra_others_exirrpowirrrat', 'mathd_algebra_427', 'mathd_algebra_76', 'mathd_numbertheory_99', 'algebra_9onxpypzleqsum2onxpy', 'mathd_numbertheory_233', 'algebra_absapbon1pabsapbleqsumabsaon1pabsa', 'imo_1984_p6', 'imo_2001_p6', 'mathd_numbertheory_321', 'mathd_algebra_17', 'mathd_algebra_153', 'algebra_sqineq_unitcircatbpamblt1', 'amc12a_2021_p18', 'mathd_algebra_329', 'induction_pprime_pdvdapowpma', 'amc12a_2021_p9', 'aime_1984_p1', 'amc12a_2021_p22', 'mathd_numbertheory_229', 'mathd_numbertheory_100', 'mathd_algebra_313', 'amc12b_2002_p4', 'amc12a_2002_p6', 'amc12a_2003_p23', 'mathd_algebra_129', 'amc12b_2021_p18', 'mathd_algebra_484', 'mathd_numbertheory_551', 'mathd_algebra_304', 'amc12a_2021_p8', 'algebra_ineq_nto1onlt2m1on', 'amc12b_2002_p19', 'mathd_numbertheory_341', 'mathd_numbertheory_711', 'amc12b_2020_p22', 'mathd_algebra_113', 'amc12a_2020_p9', 'amc12_2000_p1', 'amc12a_2021_p19', 'algebra_amgm_sumasqdivbgeqsuma', 'mathd_numbertheory_212', 'mathd_numbertheory_320', 'mathd_algebra_125', 'induction_1pxpownlt1pnx', 'mathd_algebra_148', 'amc12a_2019_p12', 'induction_11div10tonmn1ton', 'algebra_amgm_sum1toneqn_prod1tonleq1', 'imo_1985_p6', 'amc12a_2020_p15', 'mathd_algebra_332', 'algebra_cubrtrp1oncubrtreq3_rcubp1onrcubeq5778', 'mathd_algebra_293', 'mathd_algebra_440', 'mathd_numbertheory_254', 'amc12_2000_p6', 'aime_1988_p8', 'mathd_algebra_114', 'imo_2019_p1', 'mathd_algebra_513', 'mathd_algebra_143', 'mathd_algebra_354', 'aime_1984_p7', 'mathd_algebra_246', 'aime_1983_p3', 'numbertheory_3pow2pownm1mod2pownp3eq2pownp2', 'mathd_numbertheory_85', 'amc12_2001_p21', 'mathd_numbertheory_239', 'amc12b_2002_p2', 'mathd_algebra_196', 'mathd_algebra_342', 'mathd_numbertheory_517', 'amc12a_2009_p7', 'mathd_algebra_270', 'amc12a_2021_p12', 'mathd_algebra_362', 'mathd_numbertheory_521', 'amc12a_2002_p13', 'imo_1964_p2', 'mathd_algebra_289', 'amc12a_2021_p3', 'amc12a_2008_p25', 'algebra_apbpceq2_abpbcpcaeq1_aleq1on3anbleq1ancleq4on3', 'mathd_numbertheory_66', 'amc12b_2021_p1', 'algebra_apbon2pownleqapownpbpowon2', 'imo_1968_p5_1', 'aime_1990_p15', 'mathd_numbertheory_235', 'amc12b_2020_p13', 'amc12b_2021_p13', 'mathd_numbertheory_234', 'numbertheory_aoddbdiv4asqpbsqmod8eq1', 'mathd_numbertheory_222', 'aime_1999_p11', 'mathd_algebra_359', 'imo_1965_p2', 'mathd_algebra_288', 'mathd_numbertheory_127', 'imo_1974_p3', 'aime_1991_p9', 'amc12a_2009_p6', 'mathd_algebra_158', 'algebra_absxm1pabsxpabsxp1eqxp2_0leqxleq1', 'aime_1990_p4', 'mathd_numbertheory_541', 'mathd_algebra_314', 'amc12_2000_p20', 'mathd_algebra_302', 'aime_1983_p2', 'mathd_algebra_139', 'amc12a_2021_p25', 'amc12a_2020_p25', 'mathd_numbertheory_150', 'aime_1989_p8', 'mathd_numbertheory_296', 'mathd_algebra_142', 'numbertheory_exk2powkeqapb2mulbpa2_aeq1', 'mathd_algebra_400', 'aime_1995_p7', 'mathd_numbertheory_185', 'mathd_algebra_441', 'mathd_numbertheory_582', 'mathd_algebra_338']
2024-01-15 19:50:22,059 - __main__ - INFO - Attempting to prove lemma: aime_1983_p1
2024-01-15 19:50:22,060 - __main__ - ERROR - Exception occurred. Retrying 0 more times.
Traceback (most recent call last):
  File "/home/run001122/GPT_LEAN/copra/src/main/eval_benchmark.py", line 375, in eval_benchmark
    eval_dataset(env_settings, benchmark, prompt_settings, dataset, eval_settings, checkpoint_info, eval_proof_results, logger=logger)
  File "/home/run001122/GPT_LEAN/copra/src/main/eval_benchmark.py", line 154, in eval_dataset
    informal_proof_repo = prompt_settings.get_informal_proof_repo()
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/run001122/GPT_LEAN/copra/src/main/config.py", line 71, in get_informal_proof_repo
    raise Exception(f"Invalid informal proof repo path: {self.informal_proof_repo}")
Exception: Invalid informal proof repo path: .log/proofs/eval_driver/informal_few_shot/gpt4/miniF2F_test/20231204-234547/informal_proofs
2024-01-15 19:50:32,066 - __main__ - INFO - Finished running experiment: 
{
    "env_settings": {
        "name": "bm25_retrieval",
        "retrieval_strategy": "BM25"
    },
    "prompt_settings": {
        "name": "lean_few_shot_informal_to_formal_dfs_gpt4_turbo",
        "main_prompt": "data/prompts/system/lean-proof-agent-with-dfs-and-informal.md",
        "conv_prompt": "data/prompts/conversation/lean-proof-agent-example-long-conv-dfs-and-informal.md",
        "informal_proof_repo": ".log/proofs/eval_driver/informal_few_shot/gpt4/miniF2F_test/20231204-234547/informal_proofs"
    },
    "eval_settings": {
        "name": "n_60_dfs_gpt4_128k_no_retrieve_no_ex",
        "use_hammer": false,
        "setting_type": "Agent",
        "max_proof_depth": 100,
        "timeout_in_secs": 60,
        "proof_retries": 1,
        "max_tokens_per_action": 100,
        "max_theorems_in_prompt": 7,
        "gpt_model_name": "gpt-4-1106-preview",
        "max_number_of_episodes": 1,
        "max_steps_per_episode": 60,
        "render": false,
        "checkpoint_dir": ".log/checkpoints/miniF2F_test/n_60_dfs_gpt4_128k_no_retrieve_no_ex/lean_few_shot_informal_to_formal_dfs_gpt4_turbo",
        "should_checkpoint": false,
        "temperature": 0.0,
        "max_history_messages": 0,
        "policy_name": "Dfs",
        "proof_dump_dir": ".log/proofs/eval_driver/dfs/miniF2F_test/20240115-195009",
        "use_human_readable_proof_context": true,
        "sample": 1.0,
        "sample_seed": 3840,
        "use_example_retrieval": false,
        "always_use_useful_theorem_retrieval": false,
        "num_goal_per_prompt": null
    },
    "benchmark": {
        "name": "miniF2F_test",
        "num_files": 1,
        "language": "LEAN",
        "datasets": [
            {
                "project": "data/benchmarks/miniF2F",
                "files": [
                    {
                        "path": "lean/src/test.lean",
                        "theorems": [
                            "aime_1983_p1",
                            "aime_1983_p2",
                            "aime_1983_p3",
                            "aime_1984_p1",
                            "aime_1984_p7",
                            "aime_1987_p5",
                            "aime_1988_p8",
                            "aime_1989_p8",
                            "aime_1990_p15",
                            "aime_1990_p4",
                            "aime_1991_p9",
                            "aime_1994_p3",
                            "aime_1995_p7",
                            "aime_1997_p9",
                            "aime_1999_p11",
                            "algebra_2varlineareq_fp3zeq11_3tfm1m5zeqn68_feqn10_zeq7",
                            "algebra_9onxpypzleqsum2onxpy",
                            "algebra_abpbcpcageq3_sumaonsqrtapbgeq3onsqrt2",
                            "algebra_absapbon1pabsapbleqsumabsaon1pabsa",
                            "algebra_absxm1pabsxpabsxp1eqxp2_0leqxleq1",
                            "algebra_amgm_sum1toneqn_prod1tonleq1",
                            "algebra_amgm_sumasqdivbgeqsuma",
                            "algebra_apbmpcneq0_aeq0anbeq0anceq0",
                            "algebra_apbon2pownleqapownpbpowon2",
                            "algebra_apbpceq2_abpbcpcaeq1_aleq1on3anbleq1ancleq4on3",
                            "algebra_bleqa_apbon2msqrtableqambsqon8b",
                            "algebra_cubrtrp1oncubrtreq3_rcubp1onrcubeq5778",
                            "algebra_ineq_nto1onlt2m1on",
                            "algebra_others_exirrpowirrrat",
                            "algebra_sqineq_at2malt1",
                            "algebra_sqineq_unitcircatbpabsamblt1",
                            "algebra_sqineq_unitcircatbpamblt1",
                            "algebra_sum1onsqrt2to1onsqrt10000lt198",
                            "amc12_2000_p1",
                            "amc12_2000_p12",
                            "amc12_2000_p20",
                            "amc12_2000_p6",
                            "amc12_2001_p21",
                            "amc12_2001_p5",
                            "amc12a_2002_p13",
                            "amc12a_2002_p6",
                            "amc12a_2003_p23",
                            "amc12a_2003_p5",
                            "amc12a_2008_p25",
                            "amc12a_2009_p6",
                            "amc12a_2009_p7",
                            "amc12a_2013_p4",
                            "amc12a_2019_p12",
                            "amc12a_2020_p10",
                            "amc12a_2020_p15",
                            "amc12a_2020_p25",
                            "amc12a_2020_p4",
                            "amc12a_2020_p7",
                            "amc12a_2020_p9",
                            "amc12a_2021_p12",
                            "amc12a_2021_p14",
                            "amc12a_2021_p18",
                            "amc12a_2021_p19",
                            "amc12a_2021_p22",
                            "amc12a_2021_p25",
                            "amc12a_2021_p3",
                            "amc12a_2021_p8",
                            "amc12a_2021_p9",
                            "amc12b_2002_p19",
                            "amc12b_2002_p2",
                            "amc12b_2002_p4",
                            "amc12b_2002_p7",
                            "amc12b_2020_p13",
                            "amc12b_2020_p2",
                            "amc12b_2020_p21",
                            "amc12b_2020_p22",
                            "amc12b_2020_p6",
                            "amc12b_2021_p1",
                            "amc12b_2021_p13",
                            "amc12b_2021_p18",
                            "amc12b_2021_p3",
                            "amc12b_2021_p4",
                            "amc12b_2021_p9",
                            "imo_1959_p1",
                            "imo_1960_p2",
                            "imo_1962_p2",
                            "imo_1963_p5",
                            "imo_1964_p2",
                            "imo_1965_p2",
                            "imo_1968_p5_1",
                            "imo_1969_p2",
                            "imo_1974_p3",
                            "imo_1977_p6",
                            "imo_1981_p6",
                            "imo_1982_p1",
                            "imo_1983_p6",
                            "imo_1984_p6",
                            "imo_1985_p6",
                            "imo_1992_p1",
                            "imo_1997_p5",
                            "imo_2001_p6",
                            "imo_2019_p1",
                            "imosl_2007_algebra_p6",
                            "induction_11div10tonmn1ton",
                            "induction_12dvd4expnp1p20",
                            "induction_1pxpownlt1pnx",
                            "induction_nfactltnexpnm1ngt3",
                            "induction_pord1p1on2powklt5on2",
                            "induction_pprime_pdvdapowpma",
                            "induction_prod1p1onk3le3m1onn",
                            "induction_sumkexp3eqsumksq",
                            "mathd_algebra_107",
                            "mathd_algebra_113",
                            "mathd_algebra_114",
                            "mathd_algebra_125",
                            "mathd_algebra_129",
                            "mathd_algebra_137",
                            "mathd_algebra_139",
                            "mathd_algebra_141",
                            "mathd_algebra_142",
                            "mathd_algebra_143",
                            "mathd_algebra_148",
                            "mathd_algebra_153",
                            "mathd_algebra_156",
                            "mathd_algebra_158",
                            "mathd_algebra_160",
                            "mathd_algebra_17",
                            "mathd_algebra_170",
                            "mathd_algebra_171",
                            "mathd_algebra_176",
                            "mathd_algebra_184",
                            "mathd_algebra_188",
                            "mathd_algebra_196",
                            "mathd_algebra_208",
                            "mathd_algebra_209",
                            "mathd_algebra_215",
                            "mathd_algebra_24",
                            "mathd_algebra_246",
                            "mathd_algebra_263",
                            "mathd_algebra_270",
                            "mathd_algebra_275",
                            "mathd_algebra_276",
                            "mathd_algebra_288",
                            "mathd_algebra_289",
                            "mathd_algebra_293",
                            "mathd_algebra_296",
                            "mathd_algebra_302",
                            "mathd_algebra_304",
                            "mathd_algebra_313",
                            "mathd_algebra_314",
                            "mathd_algebra_320",
                            "mathd_algebra_329",
                            "mathd_algebra_33",
                            "mathd_algebra_332",
                            "mathd_algebra_338",
                            "mathd_algebra_342",
                            "mathd_algebra_346",
                            "mathd_algebra_354",
                            "mathd_algebra_359",
                            "mathd_algebra_362",
                            "mathd_algebra_388",
                            "mathd_algebra_392",
                            "mathd_algebra_398",
                            "mathd_algebra_400",
                            "mathd_algebra_412",
                            "mathd_algebra_419",
                            "mathd_algebra_427",
                            "mathd_algebra_432",
                            "mathd_algebra_44",
                            "mathd_algebra_440",
                            "mathd_algebra_441",
                            "mathd_algebra_452",
                            "mathd_algebra_459",
                            "mathd_algebra_478",
                            "mathd_algebra_484",
                            "mathd_algebra_487",
                            "mathd_algebra_513",
                            "mathd_algebra_598",
                            "mathd_algebra_756",
                            "mathd_algebra_76",
                            "mathd_algebra_80",
                            "mathd_numbertheory_100",
                            "mathd_numbertheory_1124",
                            "mathd_numbertheory_12",
                            "mathd_numbertheory_127",
                            "mathd_numbertheory_135",
                            "mathd_numbertheory_150",
                            "mathd_numbertheory_175",
                            "mathd_numbertheory_185",
                            "mathd_numbertheory_207",
                            "mathd_numbertheory_212",
                            "mathd_numbertheory_222",
                            "mathd_numbertheory_227",
                            "mathd_numbertheory_229",
                            "mathd_numbertheory_233",
                            "mathd_numbertheory_234",
                            "mathd_numbertheory_235",
                            "mathd_numbertheory_237",
                            "mathd_numbertheory_239",
                            "mathd_numbertheory_247",
                            "mathd_numbertheory_254",
                            "mathd_numbertheory_277",
                            "mathd_numbertheory_293",
                            "mathd_numbertheory_296",
                            "mathd_numbertheory_299",
                            "mathd_numbertheory_3",
                            "mathd_numbertheory_314",
                            "mathd_numbertheory_320",
                            "mathd_numbertheory_321",
                            "mathd_numbertheory_328",
                            "mathd_numbertheory_34",
                            "mathd_numbertheory_341",
                            "mathd_numbertheory_342",
                            "mathd_numbertheory_343",
                            "mathd_numbertheory_345",
                            "mathd_numbertheory_353",
                            "mathd_numbertheory_427",
                            "mathd_numbertheory_430",
                            "mathd_numbertheory_435",
                            "mathd_numbertheory_447",
                            "mathd_numbertheory_451",
                            "mathd_numbertheory_457",
                            "mathd_numbertheory_483",
                            "mathd_numbertheory_495",
                            "mathd_numbertheory_5",
                            "mathd_numbertheory_517",
                            "mathd_numbertheory_521",
                            "mathd_numbertheory_541",
                            "mathd_numbertheory_551",
                            "mathd_numbertheory_552",
                            "mathd_numbertheory_559",
                            "mathd_numbertheory_582",
                            "mathd_numbertheory_618",
                            "mathd_numbertheory_66",
                            "mathd_numbertheory_711",
                            "mathd_numbertheory_728",
                            "mathd_numbertheory_764",
                            "mathd_numbertheory_765",
                            "mathd_numbertheory_769",
                            "mathd_numbertheory_85",
                            "mathd_numbertheory_99",
                            "numbertheory_2pownm1prime_nprime",
                            "numbertheory_3pow2pownm1mod2pownp3eq2pownp2",
                            "numbertheory_4x3m7y3neq2003",
                            "numbertheory_aoddbdiv4asqpbsqmod8eq1",
                            "numbertheory_exk2powkeqapb2mulbpa2_aeq1",
                            "numbertheory_fxeq4powxp6powxp9powx_f2powmdvdf2pown",
                            "numbertheory_notequiv2i2jasqbsqdiv8",
                            "numbertheory_x5neqy2p4"
                        ]
                    }
                ]
            }
        ],
        "few_shot_data_path_for_retrieval": null,
        "few_shot_metadata_filename_for_retrieval": null,
        "dfs_data_path_for_retrieval": null,
        "dfs_metadata_filename_for_retrieval": null
    }
}
